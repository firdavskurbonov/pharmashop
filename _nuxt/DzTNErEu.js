import{g as F,M as z,x as E,r as N,z as J,c as p,o as v,a as t,t as o,k as V,d,F as R,l as H,_ as P,b as U}from"./wuRFwLR8.js";import{u as $}from"./uyDu4b4r.js";const G={class:"order-confirmation-container"},K={key:0,class:"loading-state"},Q={key:1,class:"error-state"},W={key:2,class:"confirmation-content"},X={class:"confirmation-header"},Y={class:"confirmation-message"},Z={class:"order-summary-card"},tt={class:"order-info"},st={class:"info-item"},ot={class:"value"},et={class:"info-item"},at={class:"value"},nt={class:"info-item"},lt={class:"value status"},it={class:"estimated-delivery"},rt={class:"delivery-date"},dt={class:"order-details-section"},ut={class:"details-grid"},pt={class:"detail-card"},vt={class:"card-content"},ct={class:"detail-card"},mt={class:"card-content"},ft={class:"order-items"},gt={class:"items-table"},ht={class:"row-item product-col"},yt={class:"product-info"},wt={class:"row-item price-col"},_t={class:"row-item quantity-col"},kt={class:"row-item total-col"},bt={class:"order-totals"},xt={class:"total-row"},Dt={class:"total-row"},Nt={class:"total-row"},Ct={class:"total-row grand-total"},Mt=F({__name:"OrderConfirmation",setup(q){z();const C=E(),x=$(),e=N(null),D=N(!0),b=N(""),c=l=>new Intl.NumberFormat("tg-TJ",{style:"currency",currency:"TJS",currencyDisplay:"name"}).format(l).replace("Tajikistani somonis","сомонӣ"),I=()=>{const l=new Date,s=Math.floor(Math.random()*2);let n=new Date(l),i=0;for(;i<s;)n.setDate(n.getDate()+1),n.getDay()!==0&&n.getDay()!==6&&i++;const r={weekday:"long",year:"numeric",month:"long",day:"numeric"};return n.toLocaleDateString("ru-RU",r)},O=()=>{window.print()},T=()=>{C.push("/products")};return J(async()=>{const l=localStorage.getItem("checkoutData");if(!l){b.value="Order ID not found",D.value=!1;return}try{let s="",n="",i="",r={},u={},f="",g="",h=0,y=0,w=0,_=0,k=[];if(l){const a=JSON.parse(l);s=a.orderNumber||"",n=a.date||"",i=a.status||"",r=a.shippingAddress||{},u=a.customer||{},f=a.paymentMethod||"",g=a.shippingMethod||"",h=a.shippingCost||0,y=a.subtotal||0,w=a.tax||0,_=a.total||0,k=a.items||[]}e.value={orderNumber:s,date:n,status:i,customer:{firstName:u.firstName||"",lastName:u.lastName||"",email:u.email||""},shippingAddress:{addressLine1:r.addressLine1||"",city:r.city||""},items:k,paymentMethod:f,shippingMethod:g,subtotal:y,shipping:h,tax:w,total:_},x.items.length>0&&x.clearCart()}catch(s){console.error("Failed to load order details:",s),b.value="Failed to load order details. Please try again later."}finally{D.value=!1}}),(l,s)=>{var n,i,r,u,f,g,h,y,w,_,k,a,M,A,S,B,L,j;return v(),p("div",G,[D.value?(v(),p("div",K,s[0]||(s[0]=[t("div",{class:"spinner"},null,-1),t("p",null,"Загрузка деталей вашего заказа...",-1)]))):b.value?(v(),p("div",Q,[s[1]||(s[1]=t("h2",null,"Ого! Что-то пошло не так.",-1)),t("p",null,o(b.value),1)])):(v(),p("div",W,[t("div",X,[s[4]||(s[4]=t("div",{class:"success-icon"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),t("polyline",{points:"22 4 12 14.01 9 11.01"})])],-1)),s[5]||(s[5]=t("h1",null,"Спасибо за Ваш заказ!",-1)),t("p",Y,[s[2]||(s[2]=d(" Ваш заказ подтвержден и обрабатывается. Мы отправили подтверждающее письмо на ")),t("strong",null,o(((i=(n=e.value)==null?void 0:n.customer)==null?void 0:i.email)||""),1),s[3]||(s[3]=d(". "))])]),t("div",Z,[t("div",tt,[t("div",st,[s[6]||(s[6]=t("span",{class:"label"},"Номер заказа:",-1)),t("span",ot,o((r=e.value)==null?void 0:r.orderNumber),1)]),t("div",et,[s[7]||(s[7]=t("span",{class:"label"},"Дата заказа:",-1)),t("span",at,o((u=e.value)==null?void 0:u.date),1)]),t("div",nt,[s[8]||(s[8]=t("span",{class:"label"},"Статус Заказа:",-1)),t("span",lt,o((f=e.value)==null?void 0:f.status),1)])]),t("div",it,[s[9]||(s[9]=t("h3",null,"Предполагаемая доставка",-1)),t("p",rt,o(I()),1),s[10]||(s[10]=t("p",{class:"delivery-note"}," Вам позвонит наш курьер и проинформирует Вас по поводу Вашего заказа. ",-1))])]),t("div",dt,[s[24]||(s[24]=t("h2",null,"Детали заказа",-1)),t("div",ut,[t("div",pt,[s[14]||(s[14]=t("h3",null,"Адрес доставки",-1)),t("div",vt,[t("p",null,[s[11]||(s[11]=t("strong",null,"Имя:",-1)),d(" "+o((g=e.value)==null?void 0:g.customer.firstName)+" "+o((h=e.value)==null?void 0:h.customer.lastName),1)]),t("p",null,[s[12]||(s[12]=t("strong",null,"Адрес:",-1)),d(" "+o((y=e.value)==null?void 0:y.shippingAddress.addressLine1),1)]),t("p",null,[s[13]||(s[13]=t("strong",null,"Город:",-1)),d(" "+o((w=e.value)==null?void 0:w.shippingAddress.city),1)]),t("p",null,o((k=(_=e.value)==null?void 0:_.shippingAddress)==null?void 0:k.country),1)])]),t("div",ct,[s[17]||(s[17]=t("h3",null,"Оплата и доставка",-1)),t("div",mt,[t("p",null,[s[15]||(s[15]=t("strong",null,"Тип оплаты:",-1)),d(" "+o((a=e.value)==null?void 0:a.paymentMethod),1)]),t("p",null,[s[16]||(s[16]=t("strong",null,"Тип доставки:",-1)),d(" "+o((M=e.value)==null?void 0:M.shippingMethod),1)])])])]),t("div",ft,[s[23]||(s[23]=t("h3",null,"Заказанные препараты",-1)),t("div",gt,[s[22]||(s[22]=V('<div class="table-header" data-v-157fc814><div class="header-item product-col" data-v-157fc814>Наименование</div><div class="header-item price-col" data-v-157fc814>Цена</div><div class="header-item quantity-col" data-v-157fc814>Количество</div><div class="header-item total-col" data-v-157fc814>Итого</div></div>',1)),(v(!0),p(R,null,H((A=e.value)==null?void 0:A.items,m=>(v(),p("div",{key:m.id,class:"table-row"},[t("div",ht,[t("div",yt,[t("h4",null,o(m.name),1)])]),t("div",wt,o(c(m.price)),1),t("div",_t,o(m.quantity),1),t("div",kt,o(c(m.price*m.quantity)),1)]))),128)),t("div",bt,[t("div",xt,[s[18]||(s[18]=t("span",null,"Промежуточный итог",-1)),t("span",null,o(c(((S=e.value)==null?void 0:S.subtotal)??0)),1)]),t("div",Dt,[s[19]||(s[19]=t("span",null,"Доставка",-1)),t("span",null,o(c(((B=e.value)==null?void 0:B.shipping)??0)),1)]),t("div",Nt,[s[20]||(s[20]=t("span",null,"НДС",-1)),t("span",null,o(c(((L=e.value)==null?void 0:L.tax)??0)),1)]),t("div",Ct,[s[21]||(s[21]=t("span",null,"Итого",-1)),t("span",null,o(c(((j=e.value)==null?void 0:j.total)??0)),1)])])])])]),t("div",{class:"confirmation-actions"},[t("button",{onClick:O,class:"btn-secondary"},s[25]||(s[25]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("polyline",{points:"6 9 6 2 18 2 18 9"}),t("path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}),t("rect",{x:"6",y:"14",width:"12",height:"8"})],-1),d(" Распечатать квитанцию ")])),t("button",{onClick:T,class:"btn-primary"}," Продолжить покупку ")]),s[26]||(s[26]=V('<div class="customer-support" data-v-157fc814><h3 data-v-157fc814>Нужна помощь?</h3><p data-v-157fc814> Если у вас есть вопросы по вашему заказу, свяжитесь с нашей службой поддержки клиентов: </p><div class="support-options" data-v-157fc814><div class="support-option" data-v-157fc814><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-157fc814><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z" data-v-157fc814></path><polyline points="22,6 12,13 2,6" data-v-157fc814></polyline></svg><span data-v-157fc814>info@apteka.tj</span></div><div class="support-option" data-v-157fc814><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-157fc814><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z" data-v-157fc814></path></svg><span data-v-157fc814>+992 93 333-33-33</span></div></div></div>',1))]))])}}}),At=P(Mt,[["__scopeId","data-v-157fc814"]]),Lt=F({__name:"orderconfirmation",setup(q){return(C,x)=>(v(),p("div",null,[U(At)]))}});export{Lt as default};
